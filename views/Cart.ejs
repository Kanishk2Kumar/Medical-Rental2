<section id="cart_M">
    <div class="main-wrapper">
        <!-- Shopping Cart -->
        <div class="shopping-cart">
            <h2>Shopping Cart</h2>
            <div class="cart-content">
                <div class="cart-items">
                    <% if (cart && cart.products.length > 0) { %>
                        <% cart.products.forEach(productItem => { %>
                            <div class="cart-item" data-price="<%= productItem.productId.price %>">
                                <div class="item-image">
                                    <img src="/<%= productItem.productId.image %>" alt="Item Image">
                                </div>
                                <div class="item-details">
                                    <h3 class="item-name"><%= productItem.productId.title %></h3>
                                    <p class="product-description"><%= productItem.productId.description %></p>
                                    <span class="item-status"><%= productItem.productId.inStock ? 'In stock' : 'Out of stock' %></span>
                                    <br>
                                    <div class="item-actions">
                                        <div class="quantity-wrapper">
                                            <span class="qty-label">Qty:</span>
                                            <select id="quantity" name="quantity" class="item-quantity" onchange="updatePrice()">
                                                <% for (let i = 0; i <= 5; i++) { %>
                                                    <option value="<%= i %>" <%= i === productItem.quantity ? 'selected' : '' %>><%= i %></option>
                                                <% } %>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="item-price">₹<span class="price-value"><%= productItem.productId.price %></span></div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p>Your cart is empty</p>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- Checkout Summary -->
        <div class="checkout-summary">
            <span class="subtotal">Subtotal (<%= cart.products.length %> item<%= cart.products.length !== 1 ? 's' : '' %>): ₹<span id="subtotal">
                <%= cart.products.reduce((acc, item) => acc + item.productId.price * item.quantity, 0) %></span></span>
            <button type="button" class="checkout-btn">Proceed to Buy</button>
        </div>
    </div>

    <script src="script.js"></script> <!-- Link to your JavaScript file -->
</section>
